from input_functions import nword, npos
from NgramTree import *
import nltk

p = NgramTree("POS")
w = NgramTree("Words")
sentence = 'This story happened a long, long time ago - back in the olden days, when animals could talk. A young cat was sauntering through the woods one morning. He was a proud, handsome cat, with beautiful silver-gray fur, clever whiskers, and wide, thoughtful eyes. When he came to the stream, he stopped for a drink. As he dipped his tongue into the cool water, all of a sudden, a fish popped up its head and said "Well who is this, drinking my home?" But the cat was so startled that he leapt up and somersaulted over backwards in his surprise. This caused the fish to laugh merrily. The cat was taken aback by this affront, but he quickly regained his composure: "My name is Besta, and this is my part of the forest. If I want to have a drink, what business is it of yours?" His fur was puffed out in his indignation, and his tail twitched angrily. "But this is where I live," said the fish, who, remembering her manners, added hastily: "My name is Freya. I am well pleased to meet you, Besta." Besta regarded Freya. She was a pretty fish. If he looked at her one way, she looked blue, but from another angle, she appeared green. He could not remain upset with her. He smoothed his ruffled fur and dignity, and soon they were chatting away famously. It was well into the afternoon when finally they ended their conversation. From then on, Besta visited Freya every day, and they soon became fast friends. Besta told Freya all about his life in the forest - about playing in the tall grass; about the hollow log wherein he dwelt; about the joy of climbing trees - a concept that filled Freya with wonder. And Freya in her turn told Besta of the life of a fish: of swimming; of jumping out of the stream straight into the air, to fall back with a splash into the blue water; of the creatures she knew in her secret world. There was Getty the Noodlefish, who could tie himself into a knot. And Shelly the Snail, who crawled along the stream-bed all day long munching on algae. And the rare freshwater Peanutbutter and Jellyfish. And Mudbug the Crawdad (if you don\'t know what a crawdad is, I\'ll tell you - its like a lobster: it has long antennae constantly groping, beady little eyes on stalks, and snapping claws for hands). "Crawdads are rather mean and irritable," said Freya, "but if you get them talking about themselves, they can be quite amusing." Freya could find something nice to say about just about anyone. One day when Besta was talking to Freya, he suggested that she jump out of the water and visit him in his world. So she got a long start, and swimming as fast as she could, jumped right out of the stream onto the path next to Besta. She flipped and flopped piteously in the dirt. "Help me, Besta", she gasped, "I cannot breath without water! I am drowning!" Horrified, Besta pushed Freya, SPLASH! - back into her stream. She swirled around vigourously to clean off the dirt, and sadly said "Oh Besta, I cannot come to your world and play in the grass or climb trees." Besta sat down, his brow furrowed with thought, "Well then maybe I can come to you!" and jumped straight away into the water. As you might expect, this idea didn’t work, either. He thrashed around wildly. Just as Freya could not breathe out of water, Besta couldn’t breathe under the water. He dragged himself miserably back to shore, his fur matted and dripping, and sat down again to think. "There is something else I am going to try, Freya," but what that was, he would not tell her. That night, he waited until the Moon had set, and made his way to the far end of the forest; an area he usually avoided. For there dwelt a strange cat. I will not tell you his real name, his cat name - it is too difficult and dangerous to pronounce. All the cats just referred to him as Scratch, when they spoke of him at all. Scratch was a wicked cat, old and treacherous. But Besta wanted to visit him because, besides anything else that might be said of him, Scratch was a magic cat. And Besta went to ask of him a favour. He was going to ask for a spell that would allow him to visit Freya in her watery home. So Besta proceeded to Scratch’s dwelling. It was not a pleasant journey. It was in a bleak and remote end of the forest, and was deep underground through a long tunnel. Besta crept warily down the long hole. It was very dark, and very scary. He almost quit and turned back, but, thinking of his friend Freya, Besta plucked up his courage and went on. Finally, the tunnel widened out into a large space. Besta realized that he could see. Three large glowing mushrooms growing out of the wall of the cave cast a pale, spooky light, vaguely illuminating the chamber. As his eyes adjusted, he was startled to see a large cat staring at him, with an odd wry smile on his face. Of course it was Scratch: "What are you doing a way down here," his voice echoed around the room, "people do not come down here". "I have come to beg a favour," said Besta in a quavering voice. "I come to ask for a spell that will turn me into a fish, that I may visit my friend Freya." "And what will you give for such a spell?" asked Scratch. Besta was at a loss. Being a young and good natured chap, he thought that Scratch would simply give him the spell out of friendship for a fellow cat. Noting Besta’s hesitation, Scratch continued slyly, "Since you approach me with nothing to barter, I will give you the spell, but I will name you a task: you must fight me for it." Besta looked up sharply. Scratch was old, very old, yes, and covered with scars from many battles. But he looked mean and tough. "Do you accept my challenge? You know, nothing worthwhile is won without struggle..." Recalling to his mind an image of his dear friend Freya, Besta assented to the contest: "Yes, for Freya, I will fight you." The words had scarce left his lips when Scratch flung himself violently upon Besta. Long and fierce was the battle. Claws slashed, and fur flew. Just imagine the din! Scratch knew many cunning and unfair fighting tricks. He even bit a piece right out of Besta’s left ear; a scar that would be a reminder to Besta of this night for all the rest of his life. Although Scratch’s assault was fierce, Besta was young and noble, and in the end, he won. Scratch lay gasping on the floor, defeated. "Give me the spell," croaked Besta, "or I’ll give you some more!" An empty threat, for Besta was exhausted, too. But Scratch complied, and taught Besta the words that would allow him to change into a fish and visit his friend Freya. He made Besta learn it well and with no mistakes, for there were no spell checkers in those days. Besta was so happy that he purred all the way home. The next morning (after sleeping in rather late), he went to visit Freya. "I have a surprise for you today, Freya," he said when he found her in the stream. He repeated the spell taught to him by Scratch and leapt into the water. As he jumped, there was a blinding flash, and Besta transformed into a fish! The two friends swam around and splished and splashed with delight now that they could be together. How they capered and danced in the water! You might say that they got along swimmingly. Freya took Besta to a favourite place of hers, a pond at the head of the stream where a waterfall plunged over the rocks with a joyful sound. They popped their heads out of the water, and saw that the sun was making a perfect rainbow in the spray of the waterfall. Besta and Freya swam directly beneath the arch of the rainbow and became married - which was the custom of the time. And although Besta would sometimes turn himself back into a cat (mostly at night), he always returned to Freya, and they lived together happily for the rest of their days. But that is not quite the end of the story… When Besta and Freya had children, they looked like Freya, with fine, fishy bodies. But they also looked like Besta, with his silver-gray colour and long whiskers. And that is how the world got catfish!'

tokens = nltk.pos_tag(nltk.word_tokenize(sentence))

if len(tokens) > 2:
    n = 2
else:
    n = len(tokens)

for i in nltk.ngrams(tokens, n):
    tempW = nword(i)
    tempP = npos(i)
    w.ins(tempW)
    p.ins(tempP)
for i in range(1, n):
    w.ins(tempW[i:])
    p.ins(tempP[i:])

# treePrint(p,0)
# print(get_dictionaries(p))
pos_titles = get_titles(p)
pos_dictionaries = get_dictionaries(p)
for i in pos_dictionaries:
    for j in i:
        print(j)

# print([[pos_dictionaries[j] for j in i] for i in pos_titles])
# print(p.counts)
# for i in p.children:
    # print(i.counts)
